

// Git Commands
// -----------------------------------------------------------------------------------------------------------------------------

	Navigate to project directory:

		cd F:/MedicareAnalysis
		
	Stage all files:

		git add .
		
	Commit all staged files to git:

		git commit -m "<commit_message>"
		
	Push all local branch changes to remote branch:

		git push -u origin master
		
	Create file:

		touch <file_name>

	"Stash" the most recent local changes for later. Helps with merging local and origin changes:

		git stash
		
	Rename/Move file within git repository:

		git mv <existing_path> <new_path>
		
	Stop tracking a folder and files recursively from branch:

		git rm -r --cached <folder>


// Initialize LOCAL postgresql connection
// -----------------------------------------------------------------------------------------------------------

	psql -U BBassett DeSynPUF_DB


// Initialize AZURE postgresql connection
// -----------------------------------------------------------------------------------------------------------

	psql "host=<server> port=<port> user=<admin-user> dbname=postgres sslmode=require"


// Connect and query with Azure CLI with Azure Database for PostgreSQL flexible server
// -----------------------------------------------------------------------------------------------------------

	
	az postgres flexible-server connect -n <server-name> -u <username> -p "<password>" -d <database-name> --interactive



// End command for Azure Cloud Shell:
// -----------------------------------------------------------------------------------------------------------

q


	
// Close postgresql
// -----------------------------------------------------------------------------------------------------------

	\q



// Delete all rows in a table
// -----------------------------------------------------------------------------------------------------------

	TRUNCATE TABLE beneficiary_summary_2008;


// List first 10 results in a table
// -----------------------------------------------------------------------------------------------------------

	SELECT * FROM ndc_package LIMIT 10;


// List all functions in a schema
// -----------------------------------------------------------------------------------------------------------

	\df public.*


// Reset entire schema
// -----------------------------------------------------------------------------------------------------------


	DROP SCHEMA public CASCADE;
	CREATE SCHEMA public;


// Create A Backup
// -----------------------------------------------------------------------------------------------------------

//	command promt tools, not for use within postgresql itself
//	single database only
	
	pg_dump -v -U BBassett -d DeSynPUF_DB -F tar -f f:/MedicareAnalysis/all_db_backup.tar
	

// List the names of every table in the database
// -----------------------------------------------------------------------------------------------------------

SELECT tablename
  FROM pg_catalog.pg_tables
  WHERE schemaname = 'public'
  ORDER by tablename;


// List columns & data types for a table
// -----------------------------------------------------------------------------------------------------------

SELECT column_name, data_type
FROM information_schema.columns
WHERE table_schema = 'public' AND table_name = 'ma_inpatientclaims'
ORDER BY column_name;


// For Loop in Postgresql
// -----------------------------------------------------------------------------------------------------------


	DO $$

	DECLARE
		counter INT := 0;
		
	BEGIN
	  LOOP
		counter = counter + 1;
		RAISE notice '%', counter;
		IF counter = 20 THEN
			EXIT;
		END IF;
	  END LOOP;
	END;

	$$;
	
	
// Custom Function takes a table and column name and returns a table
// -----------------------------------------------------------------------------------------------------------

	CREATE OR REPLACE FUNCTION convert_desynpuf_id (
	   table_name VARCHAR,
	   col_name VARCHAR
	)

	RETURNS TABLE ( 
		birth_dt DATE
	)

	LANGUAGE plpgsql

	AS $$

	DECLARE

		s TEXT;
		
	BEGIN
		
		s := format('SELECT %I FROM %I LIMIT 5;', col_name, table_name);

		RETURN QUERY EXECUTE s;

	END
	$$;

	SELECT * FROM convert_desynpuf_id ('beneficiary_summary_2008', 'bene_birth_dt');
